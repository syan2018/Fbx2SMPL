
# Joints2AmassNPZ

我们将原始的Joints旋转及位置数据依据指定的格式压缩至Amass规定的NPZ文件

```

{
'trans':
shape: (241, 3)
[[ 1.27337873e-03 -1.16516013e-02  9.42431229e-01]
 [ 1.31666973e-03  9.96435743e-02  9.11084870e-01]
 [ 1.36122450e-03  2.10940564e-01  8.79721649e-01]
 ...
 [ 3.24391097e-03  6.14415246e+00  9.65470398e-01]]
'gender':
shape: ()
male
'mocap_framerate':
shape: ()
30
'betas':
shape: (16,)
[0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.]
'dmpls':
shape: (241, 8)
[[0. 0. 0. ... 0. 0. 0.]
 [0. 0. 0. ... 0. 0. 0.]
 [0. 0. 0. ... 0. 0. 0.]
 ...
 [0. 0. 0. ... 0. 0. 0.]]
'poses':
shape: (241, 156)
[[1.45284612 0.34928713 0.45694164 ... 0.         0.         0.        ]
 [1.43994152 0.34778467 0.45122757 ... 0.         0.         0.        ]
 [1.42702886 0.34623506 0.44554216 ... 0.         0.         0.        ]
 ...
 [1.46637693 0.19644253 0.20309629 ... 0.         0.         0.        ]]
}

```

样例文件如上所示，主要包含几组参数

- trans：smpl模型逐帧的位移，我们通过m_avg_Pelvis骨骼的位置计算
- gender：性别参数，对于我们的情景默认为male
- mocap_framerate：待转换动画的帧率
- betas：形态参数，对于动画生成而言不使用
- dmpls：微表面参数，对动画生成而言不使用
- poses：smpl模型的姿势参数，基于每帧各骨骼的旋转轴角获得

我们通过 json2amass_npz.ipynb 脚本实现该转换过程

> 注意！！！
>
> 使用该脚本请依实际情况修改 keys_mapping.csv 文件，确定 Joints2SMPL 的映射关系
> （第二列为备注用，实际使用序号和骨骼名进行索引）


